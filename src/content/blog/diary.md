---
author: Nical Yang
pubDatetime: 2023-12-11T15:16:06
title: 日记
postSlug: diary.md
featured: true
tags:
  - diary
description: 目标 -> 不换工作不涨薪就不刷B站和斗鱼，不然每隔一段时间又会因为这个事情再争吵一遍
---

- [ ] 学习网络请求,常见性能优化方式
  - [ ] 2023-12-20 前把<<前端性能优化小册>>看完
- [ ] react fiber, react 18
- [ ] vite,rax 或 ice 脚手架的功能
- [ ] webAssembly, 内存操作相关
- [ ] webpack loader 和 plugin
- [ ] 算法刷题 leetcode 前端算法 算法真题
- [ ] learn [english](https://www.duolingo.cn/learn) every day
- [ ] 技能成长和深度掌握+英语学习

## 2024-03-24

今天是个值得记录的日子，和范小饭聊了很多。了解到了自身的不足，之前努力的方向是为了家庭，为了父母，为了奶奶能够在困难的时候，能够出一把力；也为了让父母和自己有更多团聚的时刻。不过现在有些倦怠了，随处而安，不思进取，通过今天这次谈话，把自己从内到外剖析了一遍，为了我们自己的这个小家，为了我们自己的未来，我都不应该这样了，为了承担起我们这个小家的未来，也为了和爸妈、奶奶有更多的团聚，需要努力了，不能再像之前那样停滞不前，你自己也没有资本这样了，需要承担更多的责任，挺身而出，娱乐至死是没有未来的。
以后更多专注于自己的技能成长和深度掌握+英语学习，其它方面时间需要减少。

## 2024-01-02

新年上班的第一天,好好考虑下,接下来的 2024 年能不能比 2023 年活的更好些,无论是工作还是生活上,留给你的时间真的不多了.

- <<我在北京送快递>>看到了两句话
  - 冰山之所以看起来伟大,是因为漏出海面的只有八分之一,海底的八分之七全靠想象
  - 并不是每个人在不用温饱奔忙之后,依然知道自己该干些什么
  - 冰山理论是海明威提出的一种写作手法,是描述了在文字之外的内容,需要读者自己去挖掘,理解应该是要结合作者当时的心境,描写的人和物,展开联系
  - 不用为生存奔波了,确实不知道该干些什么...回家种田?钓鱼?看书?现在的中低层人民,消遣的方式全部都在手机上了,会不会越难诞生像作者这样的人物,会拿看书消遣生活中不用奔忙的日子.工作确实像拴住我们的链条,我们想摆脱它,但是又离不开它,离开了它,我们的生活又好像丧失了目标,失去前行的目标.貌似这也恰好说明了实现财富自由的人想去找份工作,去填补自己的内心.

## 2024-01-01

今天是周一,也是元旦,放假一天,已经放假四天了.今天终于看了点书,关于微信读书里面的<<我在北京送快递>>.

- Fiber 算法
  - 为了解决 react 15 在渲染阶段,递归比较和更新 DOM 节点,导致 JS 占用浏览器进程,无法对用户的操作进行及时响应
  - Fiber 算法通过将一次更新操作分解成批量更新,中途可中断,更新任务也存在优先级. Fiber 节点可能是一个组件或是 DOM 节点.通过时间切片,浏览器的空闲时间,进行 DOM 更新操作.如果任务时间超过浏览器空闲时间,便会中断.
  - 在 diff 过程中,比较更新前后虚拟 DOM 变化的节点,确定进行更新的部分
  - 在 reconcile 阶段计算差异的结果,更新到实际 DOM 中
  - render 阶段将组件输出转化成虚拟 DOM 的过程,包括 函数执行,生成虚拟 DOM 的过程.
- <<我在北京送快递>>
  - 描述了作者十几年的工作经历,干过多份工作.多处谈到自己的性格,是个老好人的形象.初入社会,还是一个学生的心态,觉得资本家对自己好都是一种施舍
  - 后期从事工作过程中逐渐转变了心态,认识到工作中的一些福利就应该是资本家给打工人给准备的.社会上的人还是参差不齐的,有爱占便宜的,也有像作者一样兢兢业业的.
  - 快递行业的汰换也和送的辖区相关,有的老员工送的辖区就是比新员工好,所以能一直呆下去.
  - 也描述了单车店老板是一个非常有上进心、努力拼搏的人,但是无奈和技术员工互相不对付,作者建议还是得找个懂技术的合伙人一起管理.

## 2023-12-20

今天正常上班,接下来可能需要进行编译小程序的工作;上线前如何做资源的性能报告;性能方面把掘金小册看完了,明天看看其他内容,微信收藏里面

回顾下今日知识点

- 图片的格式
  - JPEG: 丰富度最高,正常压缩下,可能会导致图片不够清晰,大小比较大
  - PNG: 支持图片透明度,一般有 PNG-8 或 PNG-24,如何区分图片类型,就需要把图片分别按照对应编码,看看前后对比
  - SVG: 矢量图形,能够支持变换颜色
  - BASE 64: 一般用于小图片,base64 会导致 HTML 文件变大
  - webp: 色彩比较丰富,大小比 JPEG 小,不过需要考虑兼容性

## 2023-12-19

今天是正常上班的一天...临下班发现在 Android 连 4G 小程序 webview 上,视频无法自动播放.明天上班打算通过 onCanPlay 和 onPlaying 事件结合去处理这种情况

回顾下今日知识点

- 重排和重绘
  - 能够引起页面重绘一般由改变元素颜色\背景色\visibility 等属性
  - 重排通常是改变元素长宽等引起其他元素变化的
- 避免重排或重绘导致的性能问题
  - 改变元素样式,通过添加 class 而不是通过 style 一项项处理,虽然浏览器也有优化,但是如果掺杂一些获取元素属性的值,例如 offsetWidth\scrollLeft\offsetTop 这类属性,则会大幅降低页面渲染速度
- microTask 和 macroTask
  - 宏任务一般由像 setTimeout\setInterval\setInmediate 这类, script 的执行也是一个
  - 微任务一般像 Promise
  - 任务队列的处理,通常是先处理宏任务,当前宏任务处理完毕后,紧接着处理宏任务内的微任务,把注册的微任务全部处理完毕后,再来处理下一个宏任务

## 2023-12-18

上午去了公司后,发现电脑忘记带了,脑袋秀逗了,哈哈哈.浪费半天假期.<br />
小饭放在门口的快递丢了,无奈门口没监控,物业的监控只能看一个电梯,门口的监控也只能看一个,不是特别清楚,时间点是 8:50~9:46<br />
下午就正常上班去了,评审需求时,后端同学直言做的需求没意义,很棒 👍<br />
下班时候,小饭分享给我一个面经,这个抓紧时间看看,已添加到微信收藏里,💪 Mr.yang<br />

回顾下今日知识点

- 浏览器的渲染
  - 解析 html, 生成 DOM tree
  - 解析 CSS, 生成 CSS tree
  - CSS 和 HTML 合成为 render tree
  - 经过布局计算,绘制,合成,最终渲染到页面上
- 浏览器引擎
  - 有渲染引擎和 JS 引擎
  - JS 代码有些情况下也会阻止页面的渲染
  - CSS -> JS -> DOM -> JS -> CSS
    1. 第一个 JS 获取不到 DOM 因为 JS 会阻塞浏览器解析 DOM
    2. 第二个 JS 能获取到 DOM,获取的样式为第一个 CSS 的样式,这种情况恰好说明了会阻塞
  - 重绘和重排
    1. 如修改元素的背景色,颜色这类样式,只会引起重绘,浏览器性能消耗较小
    2. 如果改变元素的宽高,这种会影响其他元素的布局,就会导致重排,性能消耗较大
    3. js 的加载可以有 async 和 defer,区别在于 async 表示 JS 加载完之后立即执行,对页面元素没依赖的时候可以考虑,defer 表示需要 JS 加载完,并且需要等到 ContentDidMount 事件发生后才能执行
- 优化页面的渲染
  - 防止 JS 多次操作,可以用 DocumentFragement 统一操作 DOM

## 2023-12-16

今天周六,上午出去买些水果,人贼少,草莓还挺便宜,只要 20 一斤,下回可以不用小盆子装着了.不过天气应该零下 10 度,挺冷的.买完水果,就待在家里吃早饭,睡了一觉,下午又看了<<间谍过家家>>,佛傑一家还是挺有趣的,之前听过一个说法是,日本的动漫人物是照着猫画的,是因为人类这个物种天生对猫就比较宠溺.哈哈哈哈

回顾下今日知识点

- 节流
  - 第一次点击有效,之后的几次快速点击,触发的事件都被抛弃掉
- 防抖
  - 像是帕金森的手敲击键盘一样,一段时间内只会触发一次,这样的话会导致,如果一直点击就不会触发对应的事件
- 防抖和节流结合
  - 为了至少让用户在一定时间内触发事件一次,而不会产生卡死的错觉,就需要超过时间后至少触发一次.
- 浏览器从输入 url 到页面呈现过程
  - DNS -> TCP 三次握手 -> http 请求 -> http 响应 -> 页面渲染
  - CDN 主要的作用就是缓存,让杭州的用户尽快访问北京的资源,需要在杭州或附近布置节点
  - 一般静态资源放在另一个域名,也可以防止带上主域名的 cookie,节省网络资源,节省成本

## 2023-12-15

今个请假没上班,哈哈哈.上午纠结挂三甲医院的检查,发现回龙观医院不能做血常规和传染病四项的检查,昨天和前天都下雪了,于是想着可以去北京医科附属医院,顺道去天坛公园看看雪景,看别人在朋友圈分享故宫的雪景貌似还不错,一股脑就跑去天坛公园了.<br />
到了那也 11 点 30 了.正好可以先去天坛公园看雪,看完后去医院把检查给做了.在天坛医院看算是把这 6 年没喝过的东北风给喝饱了,大风吹的我打算明天换条厚点的裤子或者穿上条秋裤,没想到北京的天气也能到零下十几度.不过雪景还是挺美的,人还挺多.<br />
到了医院后,给了个教训,以后不懂得多问问大夫,最好当天把能办的都给办了.找三家医院做血常规还是挺麻烦的,跑了两趟才搞定.不过也是塞翁失马焉知非福,看雪作为补偿了.

回顾下今日知识点

- 前端缓存
  - cookie
    1. 主要用途是做用户登录态相关
  - session storage
    1. 会话级别存储,一旦关闭 tab, 存储状态丢失.文中给了个记录用户浏览足迹的作用
  - local storage
    1. 存储一些较大资源,根据浏览器的不同,能够存储二进制和文本内容,存储大小也不同,一般在 5~10M
  - index DB
    1. 前端数据库,存储较大的资源

## 2023-12-14

明天请假不用上班,哈哈哈哈!正好这两天下雪,路上的积雪还挺大,车子压来压去,显得有点脏.明天打算去景山公园和天坛公园拍拍照,看看风景(＾－＾)V
回顾下今天的知识点:

- 强缓存
  - 不用和服务端进行验证,浏览器读取缓存中的数据,如果缓存未过期的话
  - 一般有 Expires 和 http1.1 推出 cache-control 中 max-age 字段,通常是秒做单位. max-age 在一些情况下会出现问题.例如:
    - 用秒做单位,如果修改的时间在毫秒以内,就会还是会读取修改之前的数据
    - 如果数据未变动,但是修改时间变化了, 则会判断缓存失效了
  - 上述两种情况下,则需要协商缓存了
- 协商缓存
  - 会和服务端进行请求,进行验证缓存是否失效
  - 请求头通过携带 If-Not-Modify-Since 配合 响应头中 last-Modify 检查缓存是否失效
  - 还可以通过 If-None-Match 配合 Etag 进行校验
- 其他状态
  - no-store 表示每次都需要从服务器上获取数据
  - no-cache 表示需要先和服务器进行校验,也就是 max-age:0,must-revalidate 的情况,需要进行协商请求
- 缓存类型
  - memory cache: 一般是存储较小的内容,像 base64 图片或者一些小的 js\html\css,生命周期是会随着 tab 消失而消失
  - disk cache: 存储在磁盘中,像大型的资源文件
  - service worker cache：也能够存储资源,是独立于主线程的 JavaScript 线程,脱离浏览器窗口

## 2023-12-13

今天认识两个点

- catch 中 throw 出错误, 在下一个 catch 中如果用 throw 能够继续抛出, 被接下来的 catch 捕获到;如果用下一个 catch 用 return 返回的话, 则会被 then 接收;
  - 总结的话, 在 catch 中一直用 throw 进行抛出的话,就能够一直被下一个 catch 接收到;一旦在 catch 中用了 return,则会被下个 then 捕获到,即使 return 出来的是一个 Error 对象.
  - 由此引发一个疑问,为啥 throw 出 Object 类型数据或 Error 类型,总能被下一个 catch 捕获到? throw 包含什么秘密?
    1. 查看了下 MDN 文档, throw 也能被 try catch 捕获到,毕竟抛出了一个错误. 如果没有 catch 捕获到,程序将会中止执行
    2. throw 的执行会产生异常,并能够穿透调用堆栈.
    3. 使用 try catch finally,如果 try 中 throw 异常, 会经过 catch,最后由 finally 处理;如果去掉 catch,一样会被 finally 处理. 如果 finally 中如果 return 值,则后续的语句不会被执行.
- 浏览器缓存
  - public 和 private
    1. public 表示缓存能被浏览器和代理服务器存储
    2. private 只能缓存在浏览器中
  - 强缓存
    1. Expires: 过期时间,时间戳,如果改客户端时间超过 Expires,即使缓存有效,也会判断为失效.
    2. 上述情况下,http 1.1 向下兼容, cache-control: max-age, 其中 max-age 是一个固定时间秒,浏览器发起请求时,首先会与服务端进行校验,判断资源是否失效.
    3. 还会有 s-max-age,代表代理服务器上的缓存时长,指缓存在代理服务器上的缓存时长,和浏览器端没有关系.
  - 协商缓存
    1. 浏览器会和服务器发送请求,确认缓存是否有效
    2. no-cache 请求头中会携带 if-modified-since, 服务端会返回 last-modified
    3. no-store 则不会用浏览器端的缓存,直接和服务器进行通信.

## 2023-12-12

没想到今天就是双十二了,日子过得真快啊~今天又被小明给 😒 了,看来自己还得 💪 <br/>
为了以后能出人头地,也是为了这个家庭,身份的转变,应该也要为以后得生活奋斗 <br />
心里暗暗发誓,不换工作不涨薪就不刷 B 站和斗鱼 💪 <br/>
期望你能记清自己今天说的话,把自己的状态给调整到三年前,保持保持干劲 <br/>
定一个学习的目标吧,针对面试和日常学习.<br />

## 2023-12-11

- 业务上想一想页面速度怎么提升下
- 没有系统学习 Rust, 只是简单看了下目录, rustup
- 中午还是别看短视频了,看看想看的东西
- 早上下载了传习录,毛选, Rust 极客时间课程
